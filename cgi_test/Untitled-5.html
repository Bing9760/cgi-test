<!doctype html>
<!doctype html>
<html>
<script>

function check(val)
{ 
	if (val<10)
	{ 
  		return("0"+val); 
 	}else{ 
  		return(val); 
 	} 
} 

function show()
{ 
	var date = new Date();
	var now = ""; 
	now = date.getFullYear()+"年"+ check((date.getMonth()+1))+"月"+check(date.getDate())+"日  "+check(date.getHours())+"："+check(date.getMinutes())+"："+check(date.getSeconds()); 
	document.getElementById("nowDiv").innerHTML = now;
	setTimeout("show()",1000); 
}
	
function onClickImg(){
	var div = document.getElementById("test");
	if(div.style.backgroundImage==url(image/off.jpg)){
		div.style.backgroundImage=url(image/on.jpg);
	}else{
		div.style.backgroundImage=url(image/off.jpg);
	}
}

var req = new XMLHttpRequest();
	function queryInfos(){
		req.open("POST","/info/queryinfos",true);
		req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        //设置回调函数，当前操作完成后进行的操作
        req.onreadystatechange = callback;
		var reqDate = "1021"+document.getElementById("1021").innerHTML;
		req.send(reqDate);
	}
	
	function callback(){
		var response = req.responseText;
		var jsonobject = eval("(" + response + ")");
		//获取数据的长度
		var datasize = jsonobject.size;
		//获取json中的数据数据
		var datas = jsonobject.datas;
		
		var table = document.getElementById("table");
		var infos = document.getElementById("1021");
		table.removeChild(infos);
		infos = document.createElement("1021");
		
		var msg = "<p align=\"center\"><img src=\"image/off.jpg\" width=\"126\" height=\"68\" id=\"1021\"/></p>\";
		
		infos.appendChild(msg);
		table.appendChild(infos);
		
	}
	


  var clickevent = function changeImg(){
  		var onOff true;
	  if(onOff){
		  src = "image/on.jpg";
		  onOff = false;
		  alert("test1");
	  }else{
		  src = "image/off.jpg";
		  onOff = true;
		  alert("test2");
	  }
  }


</script>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>ZigBee 灯光控制系统</title>
<style>
	.header{
		font-weight: bold;
		text-align: center;
		font-size: 36px;
		color: aliceblue;
		font-family:"等线";
	}
	.copyright{
		font-size: 26px;
		color: aliceblue;
		font-weight: bold;
		font-family: "等线";
		text-align: center;
	}
	.div{
		width: 126px;
		height: 68px;
		border: 1px solid black;
		background-image: "url(image/off.jpg)";
	}
</style>
</head>

<body background="image/background.jpg" onLoad="show()">
<table width="800" border="0" align="center">
  <tbody>
    <tr>
      <td colspan="2" align="center" valign="top">
	    <h1 class="header">ZigBee灯光控制系统</h1>
	     <h2 align="right"><font color="aliceblue"><div id="nowDiv">date</div></font></h2>
		  <h3 align="center">点击按钮以刷新</h3>
		  <form action="cgi-bin/main1.cgi" method="post">
		  	<input type="submit" name="fresh" value="刷新">
		  </form>
		  <button id="select" onClick="queryInfos()">XML</button>
      </td>
          
    </tr>
    <tr>
    	<td width="80" id="table">123</td>
    	<td width="679"><table width="707" border="">
    	  <tbody>
    	    <tr>
    	      <td width="228">
 	          <p>Room-101</p>
  	          <p>$FLAG1011$</p>
   	          <p>$FLAG1012$</p>
   	          </td>
   	          
    	      <td width="228">
 	          <p>Room-102</p>
  	          <div><img src="image/off.jpg" width="126" height="68"  onClick="clickevent(this)" id="$1021"/></div>

   	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1022"/></p></td>
   	          
    	      <td width="229">
 	          <p>Room-103</p>
  	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1031"/></p>
   	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1032"/></p></td>
  	      </tr>
    	    <tr>
    	      <td width="228">
 	          <p>Room-104</p>
  	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1041"/></p>
   	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1042"/></p></td>
   	          
    	      <td width="228">
 	          <p>Room-105</p>
  	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1051"/></p>
   	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1052"/></p></td>
   	          
    	      <td width="229">
 	          <p>Room-106</p>
  	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1061"/></p>
   	          <p align="center"><img src="image/off.jpg" width="126" height="68" id="1062"/></p></td>
  	      </tr>
  	    </tbody>
  	  </table></td>
    	
    </tr>
  </tbody>
</table>

<hr color="#663300" align="center" width="90%">
<p class="copyright">Copyright&copy;&nbsp;&nbsp;&nbsp;莆田学院—信息工程学院</p>
</body>
</html>
